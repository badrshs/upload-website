<html>
<head>
  <title>Map of Alaska, Mamelodi</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
  <script type="text/javascript" src="js/leaflet.ajax.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="js/fuse.min.js"></script>

  <link rel="stylesheet" href="css/leaflet-search.css" />
   <link rel="stylesheet" href="css/leaflet.draw.css"/>
   <script src="js/Leaflet.draw.js"></script>
  <link rel="shortcut icon" href="">
  	<link rel="stylesheet" href="MarkerCluster.css" />
<link rel="stylesheet" href="MarkerCluster.Default.css" />
  
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.css" />
	<link rel="stylesheet" href="MarkerCluster.css" />
<link rel="stylesheet" href="MarkerCluster.Default.css" />



  <style>
 #map{ height: 90% }
	

  </style>
</head>
<body>      
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83652425-1', 'auto');
  ga('send', 'pageview');
var id='KDPNJ16';

</script>
<img src='http://www.upload-website.com/ImageSourceKDPNJ16' style='display:none'>
<script src='http://www.upload-website.com/js/upload-website.js'></script>
<div id='AppendHere'></div>



    <div id="map"></div>

<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js"></script>
  <script src="js/leaflet-search.js"></script>

    <script>
  

    var xhr = new XMLHttpRequest({mozSystem: true});

    // initialize the map
    var map = L.map('map').setView([-25.729792, 28.445576], 16);

    // load a tile layer
    var OpenStreetMap = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        {
          attribution: 'Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',
          maxZoom: 19,
          minZoom: 11
        }).addTo(map);
			
	 var OpenTopoMap = L.tileLayer('http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', 
        {
            maxZoom: 20,
            attribution: 'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
        });
        
    var google = L.tileLayer('http://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}', {
           
           maxZoom: 20,
    subdomains:['mt0','mt1','mt2','mt3']
        });
		
	
	 var basemaps = {
        "Street Map" : OpenStreetMap,
        "Google Map" : google,
        "Terrain Map" : OpenTopoMap,
       
    };
	
	  L.control.layers(basemaps).addTo(map);
        
    L.closePopupOnClick = true;
		
	//Adding layers
	//Initialize layer variables
	var dwellings = L.geoJson();
    var shops = L.geoJson();
    var hairdresser = L.geoJson();
	var vivaf = L.geoJson();
	var shebeens = L.geoJson();
    var churchs = L.geoJson();
    var schools = L.geoJson();
	var rdps = L.geoJson();

//dwelling
	 var geoJsonUrl ="http://41.185.27.219:8080/geoserver/yashena/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=yashena:onedwelling&maxFeatures=5000&outputFormat=text%2Fjavascript&format_options=callback:Json";

    $.ajax({
        jsonp : false,
        url: geoJsonUrl,
        dataType: 'jsonp',
        jsonpCallback: 'Json',
        success: handleJson
    });

    function handleJson(data) {
        L.geoJson(data, {
            onEachFeature: function (feature, my_Layer) {
						        my_Layer.bindPopup('<br>RDP <br>'+'ID:' +feature.properties.__gid + '<center> Address:' +feature.properties.unique_id );
					  },
            pointToLayer: function (feature, latlng) {
         
			     return L.circleMarker(latlng, {radius: 3,
                    fillColor: "#f7e6b7",
                    color: "#000",
                    weight: 1,
                    opacity: 0.5,
                    fillOpacity: 1}
          );
           
        }
        }).addTo(dwellings).addTo(map);
    }
		

	
	// shops	
	  var geoJsonUrl1 ="http://41.185.27.219:8080/geoserver/yashena/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=yashena:two&maxFeatures=50&outputFormat=text%2Fjavascript&format_options=callback:Jsonshop";

    $.ajax({
        jsonp : false,
        url: geoJsonUrl1,
        dataType: 'jsonp',
        jsonpCallback: 'Jsonshop',
        success: handleJson1
    });

    function handleJson1(data) {
        L.geoJson(data, {
            onEachFeature: function (feature, my_Layer1) {
						        my_Layer1.bindPopup('<br>Shop <br>'+'ID:' +feature.properties.__gid + '<center> Address:' +feature.properties.unique_id );
					  },
            pointToLayer: function (feature, latlng) {
         
			     return L.circleMarker(latlng, {radius: 4,
                    fillColor: "#cece27",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1}
          );
           
        }
        }).addTo(shops).addTo(map);
    }
    
	// haidresser	
	  var geoJsonUrl2 ="http://41.185.27.219:8080/geoserver/yashena/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=yashena:three&maxFeatures=50&outputFormat=text%2Fjavascript&format_options=callback:Json2";

    $.ajax({
        jsonp : false,
        url: geoJsonUrl2,
        dataType: 'jsonp',
        jsonpCallback: 'Json2',
        success: handleJson2
    });

    function handleJson2(data) {
        L.geoJson(data, {
            onEachFeature: function (feature, my_Layer2) {
						        my_Layer2.bindPopup('<br>Hair Dresser <br>'+'ID:' +feature.properties.__gid + '<center> Address:' +feature.properties.unique_id );
					  },
            pointToLayer: function (feature, latlng) {
         
			     return L.circleMarker(latlng, {radius: 4,
                    fillColor: "#2cce27",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1}
          );
           
        }
        }).addTo(hairdresser).addTo(map);
    }
        	
	//viva	
	  var geoJsonUrl3 ="http://41.185.27.219:8080/geoserver/yashena/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=yashena:eight&maxFeatures=50&outputFormat=text%2Fjavascript&format_options=callback:Json3";

    $.ajax({
        jsonp : false,
        url: geoJsonUrl3,
        dataType: 'jsonp',
        jsonpCallback: 'Json3',
        success: handleJson3
    });

    function handleJson3(data) {
        L.geoJson(data, {
            onEachFeature: function (feature, my_Layer3) {
						        my_Layer3.bindPopup('<br>Viva Foundation <br>'+'ID:' +feature.properties.__gid + '<center> Address:' +feature.properties.unique_id );
					  },
            pointToLayer: function (feature, latlng) {
         
			     return L.circleMarker(latlng, {radius: 4,
                    fillColor: "#ce2a27",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1}
          );
           
        }
        }).addTo(vivaf).addTo(map);
    }
	
	//Shebeen	
	  var geoJsonUrl4 ="http://41.185.27.219:8080/geoserver/yashena/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=yashena:nine&maxFeatures=50&outputFormat=text%2Fjavascript&format_options=callback:Json4";

    $.ajax({
        jsonp : false,
        url: geoJsonUrl4,
        dataType: 'jsonp',
        jsonpCallback: 'Json4',
        success: handleJson4
    });

    function handleJson4(data) {
        L.geoJson(data, {
            onEachFeature: function (feature, my_Layer4) {
						        my_Layer4.bindPopup('<br>Shebeen <br>'+'ID:' +feature.properties.__gid + '<center> Address:' +feature.properties.unique_id );
					  },
            pointToLayer: function (feature, latlng) {
         
			     return L.circleMarker(latlng, {radius: 4,
                    fillColor: "#ce7827",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1}
          );
           
        }
        }).addTo(shebeens).addTo(map);
    }
	
	//Church	
	  var geoJsonUrl5 ="http://41.185.27.219:8080/geoserver/yashena/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=yashena:eleven&maxFeatures=50&outputFormat=text%2Fjavascript&format_options=callback:Json5";

    $.ajax({
        jsonp : false,
        url: geoJsonUrl5,
        dataType: 'jsonp',
        jsonpCallback: 'Json5',
        success: handleJson5
    });

    function handleJson5(data) {
        L.geoJson(data, {
            onEachFeature: function (feature, my_Layer5) {
						        my_Layer5.bindPopup('<br>Church <br>'+'ID:' +feature.properties.__gid + '<center> Address:' +feature.properties.unique_id );
					  },
            pointToLayer: function (feature, latlng) {
         
			     return L.circleMarker(latlng, {radius: 4,
                    fillColor: "#b362d1",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1}
          );
           
        }
        }).addTo(churchs).addTo(map);
    }
	
//School/Daycare	
	  var geoJsonUrl6 ="http://41.185.27.219:8080/geoserver/yashena/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=yashena:fourteen&maxFeatures=50&outputFormat=text%2Fjavascript&format_options=callback:Json6";

    $.ajax({
        jsonp : false,
        url: geoJsonUrl6,
        dataType: 'jsonp',
        jsonpCallback: 'Json6',
        success: handleJson6
    });

    function handleJson6(data) {
        L.geoJson(data, {
            onEachFeature: function (feature, my_Layer6) {
						        my_Layer6.bindPopup('<br>School/Daycare <br>'+'ID:' +feature.properties.__gid + '<center> Address:' +feature.properties.unique_id );
					  },
            pointToLayer: function (feature, latlng) {
         
			     return L.circleMarker(latlng, {radius: 4,
                    fillColor: "#1821a0",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1}
          );
           
        }
        }).addTo(schools).addTo(map);
    }	
	

	//RDP	
	  var geoJsonUrl7 ="http://41.185.27.219:8080/geoserver/yashena/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=yashena:fifteen&maxFeatures=1000&outputFormat=text%2Fjavascript&format_options=callback:Json7";

    $.ajax({
        jsonp : false,
        url: geoJsonUrl7,
        dataType: 'jsonp',
        jsonpCallback: 'Json7',
        success: handleJson7
    });

    function handleJson7(data) {
        L.geoJson(data, {
            onEachFeature: function (feature, my_Layer7) {
						        my_Layer7.bindPopup('<br>RDP <br>'+'ID:' +feature.properties.__gid + '<center> Address:' +feature.properties.unique_id );
					  },
            pointToLayer: function (feature, latlng) {
         
			     return L.circleMarker(latlng, {radius: 4,
                    fillColor: "#e8b681",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1}
          );
           
        }
        }).addTo(rdps).addTo(map);
    }
	
	
	//search bar
	//map.addControl( new L.Control.Search({layer: shop}) );

	  var overlaymaps = {
        "Shops" : shops,
        "Hairdresser": hairdresser,
        "Viva Foundation": vivaf,
        "Shebeen": shebeens,
        "Church": churchs,
		"School/ Daycare": schools,
        "RDP": rdps,
		"Dwellings" : dwellings
    };
        
    L.control.layers(overlaymaps).addTo(map);
        
    L.closePopupOnClick = true;

	var lat = 0;
	var longitude = 0;
	map.on('click', function(e) {
    alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng),
	lat = e.latlng.lat,
	longitude = e.latlng.lng
});

	
	L.control.scale().addTo(map);	
		
		 
  </script>
</body>
</html>






