(function(A){A.fn.rating=function(B){var D={showCancel:true,cancelValue:null,startValue:null,disabled:false};A.extend(D,B);var C={hoverOver:function(F){var G=A(F.target);if(G.hasClass("ui-rating-cancel")){G.addClass("ui-rating-cancel-full")}else{G.prevAll().andSelf().not(".ui-rating-cancel").addClass("ui-rating-hover");G.nextAll().addClass("ui-rating-empty-next")}},hoverOut:function(F){var G=A(F.target);G.prevAll().andSelf().removeClass("ui-rating-empty-next");G.nextAll().removeClass("ui-rating-empty-next");if(G.hasClass("ui-rating-cancel")){G.addClass("ui-rating-cancel-empty").removeClass("ui-rating-cancel-full")}else{G.prevAll().andSelf().not(".ui-rating-cancel").removeClass("ui-rating-hover")}},click:function(F){var H=A(F.target);var G=D.cancelValue;if(H.hasClass("ui-rating-cancel")){C.empty(H)}else{H.closest(".ui-rating-star").prevAll().andSelf().not(".ui-rating-cancel").attr("className","ui-rating-star ui-rating-full");H.closest(".ui-rating-star").nextAll().not(".ui-rating-cancel").attr("className","ui-rating-star ui-rating-empty");H.siblings(".ui-rating-cancel").attr("className","ui-rating-cancel ui-rating-cancel-empty");G=H.attr("value")}if(!F.data.hasChanged){A(F.data.selectBox).val(G).trigger("change")}},change:function(F){var G=A(this).val();C.setValue(G,F.data.container,F.data.selectBox)},setValue:function(H,G,I){var F={"target":null,"data":{}};F.target=A(".ui-rating-star[value="+H+"]",G);F.data.selectBox=I;F.data.hasChanged=true;C.click(F)},empty:function(F){F.attr("className","ui-rating-cancel ui-rating-cancel-empty").nextAll().attr("className","ui-rating-star ui-rating-empty")}};var E={createContainer:function(G){var F=A("<div/>").attr({title:G.title,className:"ui-rating"}).insertAfter(G);return F},createStar:function(G,F){A("<a/>").attr({className:"ui-rating-star ui-rating-empty",title:A(G).text(),value:G.value}).appendTo(F)},createCancel:function(G,F){A("<a/>").attr({className:"ui-rating-cancel ui-rating-cancel-empty",title:"Cancel"}).appendTo(F)}};return this.each(function(){if(A(this).attr("type")!=="select-one"){return }var F=this;A(F).css("display","none");var I=A(F).attr("id");if(""===I){I="ui-rating-"+A.data(F);A(F).attr("id",I)}var H=E.createContainer(F);if(true!==D.disabled&&A(F).attr("disabled")!==true){A(H).bind("mouseover",C.hoverOver).bind("mouseout",C.hoverOut).bind("click",{"selectBox":F},C.click)}if(D.showCancel){E.createCancel(this,H)}A("option",F).each(function(){if(this.value>=0){E.createStar(this,H)}});if(0!==A("#"+I+" option[selected]").size()||0!==A("#"+I+" option:selected").size()){C.setValue(A(F).val(),H,F)}else{var G=null!==D.startValue?D.startValue:D.cancelValue;C.setValue(G,H,F);A(F).val(G)}A(this).bind("change",{"selectBox":F,"container":H},C.change)})}})(jQuery)