function colorHslToRgb(r){function t(r,t,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?r+6*(t-r)*o:.5>o?t:2/3>o?r+(t-r)*(2/3-o)*6:r}var o,e,n,a,i,s;if(a=r.h,i=r.s,s=r.l,0==i)o=e=n=s;else{var c=.5>s?s*(1+i):s+i-s*i,l=2*s-c;o=t(l,c,a+1/3),e=t(l,c,a),n=t(l,c,a-1/3)}r.r=parseInt(255*o,10),r.g=parseInt(255*e,10),r.b=parseInt(255*n,10)}function colorRgbToHsl(r){var t,o,e;t=r.r,o=r.g,e=r.b,t/=255,o/=255,e/=255;var n,a,i=Math.max(t,o,e),s=Math.min(t,o,e),c=(i+s)/2;if(i==s)n=a=0;else{var l=i-s;switch(a=c>.5?l/(2-i-s):l/(i+s),i){case t:n=(o-e)/l+(e>o?6:0);break;case o:n=(e-t)/l+2;break;case e:n=(t-o)/l+4}n/=6}r.h=n,r.s=a,r.l=c}function main(){var r,t,o,e,n,a,i,s,c,l,u,m,f,g;for(e=document.getElementById("canvas"),n=e.getContext("2d"),t=e.width,o=e.height,a=t/2,i=t/2,s=5,l=1,u=10,g=4,m={r:0,g:153,b:204},r=[],c=0;g>c;c++)f={r:m.r,g:m.g,b:m.b},r.push({width:s,color:f,radius:l,x:a,y:i,offset:1,frameStart:u*c}),l-=.1,luminateColor(m);run(r,n,e,0,u)}function luminateColor(r){colorRgbToHsl(r),r.l+=.15,colorHslToRgb(r)}function clear(r,t){r.clearRect(0,0,t.width,t.height)}function run(r,t,o,e,n){var a,i,s,c,l;if(i=75,s=r.length*n+n,e===i+s)e=0;else for(a=0;a<r.length;a++)c=r[a],l||(l={r:c.color.r,g:c.color.g,b:c.color.b},colorRgbToHsl(l),l.h+=.001,l.h>=1&&(l.h=.001),colorHslToRgb(l)),c.color={r:l.r,g:l.g,b:l.b},luminateColor(l);for(clear(t,o),a=0;a<r.length;a++)c=r[a],setupArc(c,t,e,i);requestAnimationFrame(function(){e++,run(r,t,o,e,n)})}function getPos(r,t,o,e){var n,a;return o<t.frameStart?o=0:(o-=t.frameStart,o>e&&(o=0)),n=o/e*2*Math.PI,a=r+n,a>2*Math.PI&&(a-=2*Math.PI),a}function setupArc(r,t,o,e){var n,a,i,s,c,l,u;n=r.width,c=r.color,a=r.x,i=r.y,s=(a-n)*r.radius,l=getPos(r.offset*Math.PI,r,o,e),u=getPos(r.offset*Math.PI*2,r,o,e),drawArc(t,n,a,i,s,l,u,c)}function drawArc(r,t,o,e,n,a,i,s){r.closePath(),r.beginPath(),r.lineWidth=t,r.strokeStyle="rgb("+s.r+","+s.g+","+s.b+")",r.arc(o,e,n,a,i,!1),r.stroke()}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r){window.setTimeout(r,1e3/60)}}(),main();