$(function(){$("body").removeClass("coda-slider-no-js");$(".coda-slider").children('.panel').hide().end().prepend('<p class="loading">Loading...<br /><img src="images/images/ajax-loader.gif" alt="loading..." /></p>');});var sliderCount=1;$.fn.codaSlider=function(settings){settings=$.extend({autoHeight:false,autoHeightEaseDuration:2500,autoHeightEaseFunction:"easeInOutElastic",autoSlide:true,autoSlideInterval:5000,autoSlideStopWhenClicked:false,crossLinking:true,dynamicArrows:true,dynamicArrowLeftText:"&#171;",dynamicArrowRightText:"&#187;",dynamicTabs:false,dynamicTabsAlign:"center",dynamicTabsPosition:"top",externalTriggerSelector:"a.xtrig",firstPanelToLoad:1,panelTitleSelector:"h2.title",slideEaseDuration:2500,slideEaseFunction:"easeInOutElastic"},settings);return this.each(function(){var slider=$(this);if(settings.dynamicArrows){slider.parent().addClass("arrows");slider.before('<div class="coda-nav-left" id="coda-nav-left-'+ sliderCount+'"><a href="#">'+ settings.dynamicArrowLeftText+'</a></div>');slider.after('<div class="coda-nav-right" id="coda-nav-right-'+ sliderCount+'"><a href="#">'+ settings.dynamicArrowRightText+'</a></div>');};var panelWidth=940;var panelCount=slider.find(".panel").size();var panelContainerWidth=panelWidth*panelCount;var navClicks=0;$('.panel',slider).wrapAll('<div class="panel-container"></div>');$(".panel-container",slider).css({width:panelContainerWidth});if(settings.crossLinking&&location.hash&&parseInt(location.hash.slice(1))<=panelCount){var currentPanel=parseInt(location.hash.slice(1));var offset=-(panelWidth*(currentPanel- 1));$('.panel-container',slider).css({marginLeft:offset});}else if(settings.firstPanelToLoad!=1&&settings.firstPanelToLoad<=panelCount){var currentPanel=settings.firstPanelToLoad;var offset=-(panelWidth*(currentPanel- 1));$('.panel-container',slider).css({marginLeft:offset});}else{var currentPanel=1;};$("#coda-nav-left-"+ sliderCount+" a").click(function(){navClicks++;if(currentPanel==1){offset=-(panelWidth*(panelCount- 1));alterPanelHeight(panelCount- 1);currentPanel=panelCount;slider.siblings('.coda-nav').find('a.current').removeClass('current').parents('ul').find('li:last a').addClass('current');}else{currentPanel-=1;alterPanelHeight(currentPanel- 1);offset=-(panelWidth*(currentPanel- 1));slider.siblings('.coda-nav').find('a.current').removeClass('current').parent().prev().find('a').addClass('current');};$('.panel-container',slider).animate({marginLeft:offset},settings.slideEaseDuration,settings.slideEaseFunction);if(settings.crossLinking){location.hash=currentPanel};return false;});$('#coda-nav-right-'+ sliderCount+' a').click(function(){navClicks++;if(currentPanel==panelCount){offset=0;currentPanel=1;alterPanelHeight(0);slider.siblings('.coda-nav').find('a.current').removeClass('current').parents('ul').find('a:eq(0)').addClass('current');}else{offset=-(panelWidth*currentPanel);alterPanelHeight(currentPanel);currentPanel+=1;slider.siblings('.coda-nav').find('a.current').removeClass('current').parent().next().find('a').addClass('current');};$('.panel-container',slider).animate({marginLeft:offset},settings.slideEaseDuration,settings.slideEaseFunction);if(settings.crossLinking){location.hash=currentPanel};return false;});$('#coda-nav-'+ sliderCount+' a').each(function(z){$(this).bind("click",function(){navClicks++;$(this).addClass('current').parents('ul').find('a').not($(this)).removeClass('current');offset=-(panelWidth*z);alterPanelHeight(z);currentPanel=z+ 1;$('.panel-container',slider).animate({marginLeft:offset},settings.slideEaseDuration,settings.slideEaseFunction);if(!settings.crossLinking){return false};});});$(settings.externalTriggerSelector).each(function(){if(sliderCount==parseInt($(this).attr("rel").slice(12))){$(this).bind("click",function(){navClicks++;targetPanel=parseInt($(this).attr("href").slice(1));offset=-(panelWidth*(targetPanel- 1));alterPanelHeight(targetPanel- 1);currentPanel=targetPanel;slider.siblings('.coda-nav').find('a').removeClass('current').parents('ul').find('li:eq('+(targetPanel- 1)+') a').addClass('current');$('.panel-container',slider).animate({marginLeft:offset},settings.slideEaseDuration,settings.slideEaseFunction);if(!settings.crossLinking){return false};});};});if(settings.crossLinking&&location.hash&&parseInt(location.hash.slice(1))<=panelCount){$("#coda-nav-"+ sliderCount+" a:eq("+(location.hash.slice(1)- 1)+")").addClass("current");}else if(settings.firstPanelToLoad!=1&&settings.firstPanelToLoad<=panelCount){$("#coda-nav-"+ sliderCount+" a:eq("+(settings.firstPanelToLoad- 1)+")").addClass("current");}else{$("#coda-nav-"+ sliderCount+" a:eq(0)").addClass("current");};if(settings.autoHeight){panelHeight=$('.panel:eq('+(currentPanel- 1)+')',slider).height();slider.css({height:panelHeight});};if(settings.autoSlide){slider.ready(function(){setTimeout(autoSlide,settings.autoSlideInterval);});};function alterPanelHeight(x){if(settings.autoHeight){panelHeight=$('.panel:eq('+ x+')',slider).height()
slider.animate({height:panelHeight},settings.autoHeightEaseDuration,settings.autoHeightEaseFunction);};};function autoSlide(){if(navClicks==0||!settings.autoSlideStopWhenClicked){if(currentPanel==panelCount){var offset=0;currentPanel=1;}else{var offset=-(panelWidth*currentPanel);currentPanel+=1;};alterPanelHeight(currentPanel- 1);slider.siblings('.coda-nav').find('a').removeClass('current').parents('ul').find('li:eq('+(currentPanel- 1)+') a').addClass('current');$('.panel-container',slider).animate({marginLeft:offset},settings.slideEaseDuration,settings.slideEaseFunction);setTimeout(autoSlide,settings.autoSlideInterval);};};$('.panel',slider).show().end().find("p.loading").remove();slider.removeClass("preload");sliderCount++;});};