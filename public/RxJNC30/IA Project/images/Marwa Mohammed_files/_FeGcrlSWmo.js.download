if (self.CavalryLogger) { CavalryLogger.start_js(["gIHqy"]); }

__d('HostnameRewriter',['URI','isFacebookURI','lowerFacebookDomain'],(function a(b,c,d,e,f,g){var h=function x(y){return String(y).replace(/([.*+?^=!:${}()|[\]\/\\])/g,'\\$1');},i=null,j=null,k=new RegExp('^(.*(?:channel-proxy|edge-chat).*)\\.(facebook\\.com)$','i'),l=new RegExp('facebook\\.com$'),m=new RegExp('^www\\.(|.*\\.)facebook\\.com$'),n=null,o='facebook.com';function p(x){i=null;var y;if(x){y='(^|\\.)';}else y='^';n=y+h(o)+'$';j=null;}function q(){if(!n)return null;if(i)return i;i=new RegExp(n,'i');return i;}function r(){if(j)return j;j=new RegExp('(^|\\.)('+h(o)+'|facebook\\.com)$','i');return j;}function s(){return function(x){x=new (c('URI'))(x);var y=k.exec(x.getDomain());if(!y||y.length<3)return x;x.setDomain('edge-chat.'+y[2]);return x;};}function t(){return function(x){x=new (c('URI'))(x);if(r().test(x.getDomain()))x.setProtocol('https');return x;};}function u(){return function(x){x=new (c('URI'))(x);var y=x.getDomain();if(r().test(y))x.setDomain(y.replace(l,o));return x;};}function v(){return function(x){x=new (c('URI'))(x);var y=x.getDomain();if(m.test(y))x.setDomain(o);return x;};}var w={registerFacebookFilters:function x(y,z){o=y;p(z);c('isFacebookURI').setRegex(q());c('URI').registerFilter(s());c('URI').registerFilter(t());c('URI').registerFilter(u());c('lowerFacebookDomain').setDomain(o);},registerInternetDotOrgFilters:function x(y,z){o=y;c('URI').registerFilter(v());}};f.exports=w;}),null);
__d('AsyncData',[],(function a(b,c,d,e,f,g){var h=Object.create(null),i=Object.create(null),j=Object.create(null),k={resolve:function n(o,p){var q=j[o]={result:p,status:'success'};if(h[o]){h[o].forEach(function(r){return r(q.result);});delete h[o];}delete i[o];},reject:function n(o,p){var q=j[o]={error:p,status:'error'};if(i[o]){i[o].forEach(function(r){return r(q.error);});delete i[o];}delete h[o];},preload:function n(o){var p={};p.onLoaded=l.bind(null,o,p);p.onError=m.bind(null,o,p);return p;}};function l(n,o,p){var q=j[n];if(q&&!q.error){p(q.result);}else{h[n]=h[n]||[];h[n].push(p);}return o;}function m(n,o,p){var q=j[n];if(q){if(q.status==='error')p(q.error);}else{i[n]=i[n]||[];i[n].push(p);}return o;}f.exports=k;}),null);
__d('ChatSidebarPreloader',['AsyncData'],(function a(b,c,d,e,f,g){'use strict';var h={onLoaded:function i(j){c('AsyncData').preload('ChatSidebarInitialDataPreloader').onLoaded(function(k){var l=k.result;return j(l);});}};f.exports=h;}),null);
__d('ChatSidebarWebGraphQLPreloader',['AsyncData','AvailableListConstants','CurrentUser'],(function a(b,c,d,e,f,g){'use strict';var h=function k(l){return [l.buddy_id,c('AvailableListConstants')[l.status]].join('-');},i=function k(l){var m=l.all_participants.edges.map(function(o){return o.node.id;}),n=l.participants_to_render.edges.map(function(o){var p=o.node.messaging_actor,q=p.id,r=p.name,s=p.short_name,t=p.profile_picture;return {id:q,image_src:t?t.uri:null,name:r,short_name:s};});if(n.length>3)n=n.filter(function(o){return o.id!==c('CurrentUser').getID();}).slice(0,4);return {mercury_thread:{image_src:l.image?l.image.uri:null,name:l.name,participants:m},participants_to_render:n,text:'',uid:l.thread_key.thread_fbid};},j={onLoaded:function k(l){c('AsyncData').preload('ChatSidebarInitialQueryWebGraphQLPreloader').onLoaded(function(m){var n=m.result;l({buddies:n.viewer.buddies.map(function(o){return h(o);}),groups:n.viewer.groups.edges.map(function(o){return i(o.node);}),profiles:n.viewer.profiles.map(function(o){return o.represented_profile;}).filter(function(o){return !!o;}),nearby:[]});});}};f.exports=j;}),null);